<html>
    <canvas id="myCanvas"></canvas>
<script>
var cnvs = document.getElementById("myCanvas");
cnvs.width = window.innerWidth;
cnvs.height = window.innerHeight;
var ctx = cnvs.getContext("2d");

window.screen.orientation.lock("portrait"); 

// vars
var rX; // rotation
var rY;
var rZ;

var x;  // position
var y;
var z;

// round the data from the IMU
function roundData(data) {
    for (var p in data) {
        data[p] = Math.round(data[p] * 100) / 100;
    }
}

function accelerometerUpdate(e) {
    // Note: these seem to only have 2 digits of precision
    var accel = e.accelerationIncludingGravity;
    var gyro = e.rotationRate;
    var deltaTime = e.interval; 

    accel = roundData(accel);
    // gyro = roundData(gyro);

    //The following two lines are to calculate tilt from grav vector.
    // var xPosition = Math.atan2(aY, aZ);
    // var yPosition = Math.atan2(aX, aZ);
    // ctx.fillText("tilt x: " + xPosition, 20, 200);
    // ctx.fillText("tilt y: " + yPosition, 20, 240);

    ctx.clearRect(0, 0, cnvs.width, cnvs.height);
    ctx.font = "40px Arial";
    ctx.fillText("aX: " + accel.x, 20, 40);
    ctx.fillText("aY: " + accel.y, 20, 80);
    ctx.fillText("aZ: " + accel.z, 20, 120);

    // ctx.fillText("gX: " + gyro.beta, 20, 160);
    // ctx.fillText("gY: " + gyro.gamma, 20, 200);
    // ctx.fillText("gZ: " + gyro.alpha, 20, 240);    
}


//================ Event listeners ===============================

if (window.DeviceMotionEvent == undefined) {
    //No accelerometer is present. Use buttons. 
    alert("no accelerometer");
}
else {
    alert("accelerometer found");
    window.addEventListener("devicemotion", accelerometerUpdate, true);
}

</script>
</html>